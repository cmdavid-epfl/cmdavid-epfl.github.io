<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Methodology | The Dynamics of Innovation</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Methodology" />
<meta name="author" content="cmdavid-epfl, torbognaes, mcdv" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="EPFL CS-401 Applied Data Analysis Project. Fall 2018." />
<meta property="og:description" content="EPFL CS-401 Applied Data Analysis Project. Fall 2018." />
<link rel="canonical" href="http://localhost:4000/methodology/" />
<meta property="og:url" content="http://localhost:4000/methodology/" />
<meta property="og:site_name" content="The Dynamics of Innovation" />
<script type="application/ld+json">
{"description":"EPFL CS-401 Applied Data Analysis Project. Fall 2018.","author":{"@type":"Person","name":"cmdavid-epfl, torbognaes, mcdv"},"@type":"WebPage","url":"http://localhost:4000/methodology/","headline":"Methodology","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Dynamics of Innovation" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Dynamics of Innovation</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/methodology/">Methodology</a><a class="page-link" href="/story/">Analysis</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Methodology</h1>
  </header>

  <div class="post-content">
    
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Story-Outline">Data Story Outline<a class="anchor-link" href="#Data-Story-Outline">&#182;</a></h1><h2 id="Part-1.-The-Big-Picture">Part 1. The Big Picture<a class="anchor-link" href="#Part-1.-The-Big-Picture">&#182;</a></h2><p>In this first part, we answer the following questions:</p>
<ul>
<li>What does the typical patent-holder look like today, and how has that evolved between today and the 1990's?</li>
<li>Is a migration of innovators through time visible in the data, e.g. a convergence towards certain innovation centers?</li>
<li>How has the number of assignees and inventors evolved in this period?</li>
</ul>
<p>The goal here is to address the main issue that brought us to chose this subject for our data story, by clearly showing how innovation today transcends geographies.</p>
<h3 id="Approach">Approach<a class="anchor-link" href="#Approach">&#182;</a></h3><p>This first part focuses on how data evolves through time from a geographic standpoint, and we decided that using maps to visualize this evolution would be the best approach. As we have access to clean longitude and latitude data (see the below section <strong>Data Gathering</strong>), using the <strong><a href="https://python-visualization.github.io/folium/docs-v0.6.0/">Folium</a></strong> library, which has e.g. cluster-functionality using it's heat map plugin, was found to be the best way to quantify the magnitude of the networks in different geographic zones. One challenge was to show the evolution throughout the entire time period in an intuitive way. While we first thought about using Folium's layer control so that the user could manually toggle between years, for the purposes of telling a data story, we judged that it would make the story more fluid to use a timelapse. The method we used to realize this is detailed in the below section <strong>Visualizations</strong>.</p>
<p>A few time series were also plotted to provide a more quantitative perspective on the data, to be more certain about the conclusions we drew from the figures.</p>
<h2 id="Part-2.-Peeling-back-the-layers">Part 2. Peeling back the layers<a class="anchor-link" href="#Part-2.-Peeling-back-the-layers">&#182;</a></h2><p>In this second part, we look at the following examples of innovation networks for specific patents held by the following specific assignees:</p>
<ul>
<li>companies : <ul>
<li>patents :</li>
</ul>
</li>
<li>academic institutions :<ul>
<li>patents :</li>
</ul>
</li>
<li>governments :<ul>
<li>patents :</li>
</ul>
</li>
</ul>
<p>By looking at these networks, we answer the following questions:</p>
<ul>
<li>If we take a few different types of companies / government bodies / academic institutions, and look at the network supporting some of their patents, what do these networks look like, in light of the conclusions from Part 1?</li>
<li>Within the same companies, how have their networks evolved between today and the 1990's, if we look at patents similar to those above?</li>
<li>Across companies of the same type, to what extent, if any, will their networks be similar?</li>
</ul>
<h3 id="Approach">Approach<a class="anchor-link" href="#Approach">&#182;</a></h3><p>We came to the conclusion that the most natural approach again here was to explore the data using maps to visualize the innovation networks. The specific patents which are the starting points for this analysis were chosen manually, using the <strong><a href="https://patents.google.com/">Google Patents</a></strong> database to look for adequate patents to compare. We again made use of the the <strong>Folium</strong> library, though here we thought that the layer control would be more interesting, as we would only be looking at the 4-5 layers of patent citations supporting the chosen patents.</p>
<p>We thought about representing the networks using a graph-based approach, using e.g. the Python library <strong><a href="https://networkx.github.io/">networkx</a></strong>, though we felt like this was not adding more information than looking at the distribution of the inventor locations using <strong>Folium</strong>'s heat map plugin.</p>
<p>For both parts 1 and 2, while the <strong>data gathering</strong> and <strong>data preprocessing</strong> were done mostly in parallel and in an interative fashion, for simplicity we nonetheless start by presenting the data gathering part and we then present the data preprocessing, both as in their final iteration.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Gathering">Data Gathering<a class="anchor-link" href="#Data-Gathering">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="PatentsView-Database">PatentsView Database<a class="anchor-link" href="#PatentsView-Database">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The database offers a wide range of features for all patents since 1976, which can be extracted through their API.</p>
<p>The most relevant documentation can be found here:</p>
<ul>
<li><a href="http://www.patentsview.org/api/query-language.html">Query Language Documentation</a></li>
<li><a href="http://www.patentsview.org/api/patent.html">Field List</a></li>
</ul>
<p>For each research question, we came up with a list of required output <strong>fields</strong> which the API calls needed to return, as well as a list of input <strong>filters</strong> that limit the amount of extra pre-processing we had to do, while at the same time providing us with all the information necessary for us to cover the topics listed in the first section.</p>
<p>The complete list of <strong>fields</strong> is as follows:</p>
<ul>
<li><p><strong>Part 1</strong>. For each patent in a given timeframe, we need:</p>
<ul>
<li><code>cited_patent_number</code>: Patent number of the cited patents.</li>
<li><code>inventor_latitude</code>: Latitude of all the inventors as listed on the selected patent.</li>
<li><code>inventor_longitude</code>: Longitude of all the inventors as listed on the selected patent.</li>
<li><code>patent_type</code>: Category of patent (see below).</li>
<li><code>assignee_organization</code>: Organization name, if assignee is organization.</li>
<li><code>assignee_type</code>: Classification of assignee (see below).</li>
</ul>
</li>
<li><p>For <strong>Part 2</strong>, the list is the same, with the exception of the last two items, which are not needed for the second part.</p>
</li>
</ul>
<p>The <code>assignee_type</code> field allows us to have a good picture of the typical patent rights holder. The <code>assignee_type</code> categories are as follows:</p>
<ul>
<li>'2': US company or corporation</li>
<li>'3': foreign company or corporation</li>
<li>'4': US individual</li>
<li>'5': foreign individual</li>
<li>'6': US government</li>
<li>'7': foreign government</li>
<li>'8': country government</li>
<li>'9': US state governement</li>
<li>'1x': part interest</li>
</ul>
<p>As well, the reason for including the <code>patent_type</code> field is that we want to be able to distinguish between major patent categories:</p>
<ul>
<li>'Defensive Publication': "... an intellectual property strategy used to prevent another party from obtaining a patent on a product, apparatus or method for instance." ( <a href="https://en.wikipedia.org/wiki/Defensive_publication">wikipedia</a> )</li>
<li>'Design': "... legal protection granted to the ornamental design of a functional item" ( <a href="https://en.wikipedia.org/wiki/Design_patent">wikipedia</a> )</li>
<li>'Plant': covering any "new variety of plant" ( <a href="https://en.wikipedia.org/wiki/Plant_breeders&#39;_rights">wikipedia</a> )</li>
<li>'Reissue': correction of "a significant error in an already issued patent" ( <a href="https://definitions.uslegal.com/r/reissue-patent/">uslegal</a> )</li>
<li>'Statutory Invention Registration': "for publishing patent applications on which they no longer felt they could get patents" ( <a href="https://en.wikipedia.org/wiki/United_States_Statutory_Invention_Registration">wikipedia</a> )</li>
<li>'Utility': patent for a "useful" patent ( <a href="https://en.wikipedia.org/wiki/Utility_(patent">wikipedia</a>) )</li>
</ul>
<p><strong>Utility patents</strong> are the most relevant for us. They are patents protecting "any new and useful process, machine, manufacture, or composition of matter, or any new and useful improvement thereof" ( <a href="https://www.law.cornell.edu/uscode/text/35/101">U.S. Code § 101</a> ) We do chose to exclude the <strong>reissue</strong> patent type from our results, as they are not truly innovations, but only corrections on already issued patents. This category is thus omitted directly when calling the API.</p>
<p>We chose to query for the <strong>latitudes</strong> and <strong>longitudes</strong> instead of the location in the format city-state-country, as the former data are more useful for visualization purposes. Furthermore, during our preliminary data analysis, the data in the city-state-country format was not uniform (i.e., some cities were named in full, while others were abbreviated in different ways). On the other hand, the latitudes and longitudes data is uniform, and the missing data was also easier to clean than with names format.</p>
<p>We also needed to be able to query for patents based on the following <strong>filters</strong>:</p>
<ul>
<li><code>patent_number</code>: US Patent number, as assigned by USPTO.</li>
<li><code>app_date</code>: Date the patent application was filed (filing date)</li>
</ul>
<p>For the purposes of situating in time the patent data we have, we chose to consider the date at which the patent application was filed, instead of the date at which it was granted. The reasoning behind this choice is that at the time of the patent application, the innovation supporting it already exists. So while using the application date has reduced the amount of most-recent data (post 2014) we can work with, in our opinion it paints a more vivid picture of innovation. Furthermore, as our analysis is performed on data spanning a almost 3 decades, we're confident this choice is not detremental to our story.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Working-with-the-PatentsView-API">Working with the PatentsView API<a class="anchor-link" href="#Working-with-the-PatentsView-API">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>The maximum number of results per query through the PatentsView API is 10,000 per page, capped at 10 pages.</strong> (In order to avoid hitting the limit, as a rule of thumb, if we are querying for all patent applications in a given date range, we need to keep the date range to about quarter of a year.) So while the PatentsView API made it easy to extract data, the usage limits meant we had to implement some functions to automate the incremental extraction and saving of all the data we needed.</p>
<p>The following implemented functions can be found in the <strong><a href="https://github.com/cmdavid-epfl/Project/blob/master/pipeline.py">pipeline.py</a></strong> module.</p>
<ul>
<li><strong>patentsviewAPI</strong>: puts together the query string, the output fields string and the options string, and then extracts and saves the data returned by the PatentsView API in json format. The following functions are called by <strong>patentsviewAPI</strong>:<ul>
<li><strong>query</strong>: Forms query filters string to pass into <strong>get_data</strong>.</li>
<li><strong>get_data</strong> : Extract and save data from the PatentsView API.</li>
</ul>
</li>
</ul>
<p>The saved json data is of the following format:</p>
<ul>
<li>page number in format '1', '2', ...<ul>
<li>'patents': list of patents in page. For each patent:<ul>
<li>'patent_type'</li>
<li>'inventors' : list of inventors listed for the patent. For each inventor:<ul>
<li>'inventor_key_id'</li>
<li>'inventor_latitude'</li>
<li>'inventor_longitude'</li>
</ul>
</li>
<li>'assignees': list of assignees listed for the patent. For each assignee:<ul>
<li>'assignee_key_id'</li>
<li>'assignee_organization'</li>
<li>'assignee_type'</li>
</ul>
</li>
<li>'cited_patents' : list of other patents cited by the current patent. For each cited patent:<ul>
<li>'cited_patent_number'</li>
</ul>
</li>
</ul>
</li>
<li>'count': number of results in the page</li>
<li>'total_patent_count': total number of patents referenced in the results  </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Preprocessing">Data Preprocessing<a class="anchor-link" href="#Data-Preprocessing">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Part-1.">Part 1.<a class="anchor-link" href="#Part-1.">&#182;</a></h2><p>The following functions in the <strong>pipeline</strong> module are specifically for preprocessing the data required for Part 1:</p>
<ul>
<li><p><strong>load_data</strong>: converts the saved jsondata from the PatentsView API to the format that is most useful in answering the research topics stated in Part 1, by calling on the following functions:</p>
<ul>
<li><strong>get_full_year_data</strong>: Fetches data for a full year, one quarter at a time, to deal with the PatentsView limits.</li>
<li><strong>preprocess_data</strong>: Preprocesses saved json data from file to the format used for the data analysis.</li>
</ul>
</li>
<li><p><strong>get_ts</strong>: Extracts time series data from the dataset. The extracted time series are as follows:</p>
<ul>
<li>Number of patent applications for each year</li>
<li>Number of inventors listed in patent applications in each year</li>
<li>Number of patents cited in patent applications filed in each year</li>
<li>Number of utility patent applications in each year</li>
<li>Number of design patent applications in each year</li>
<li>Number of individuals listed as assignees in patent applications in each year</li>
</ul>
</li>
<li><p><strong>get_all_locations</strong>: Returns list of locations and the number of inventors at each location for the given data, in the format required by the Folium heatmap plugin.</p>
</li>
<li><p><strong>get_top_k_locations</strong>: Returns list of locations and the number of inventors at each location, considering only the data from the top k assignees, ranked by number of patent applications.</p>
</li>
<li><p><strong>get_assignee_ts</strong>: Returns the time series of the number of inventors for the specified assignees</p>
</li>
</ul>
<p>The proprocessing is straightforward, as the PatentsView API returns data in json format. The preprocessed data (output of <strong>load_data</strong>) has the following structure:</p>
<ul>
<li>for each YEAR<ul>
<li>dataframe: proportion of patents in each patent type.</li>
<li>dataframe: unique list of all inventor locations. For each inventor location : the count of the number of inventors listed in patent applications that were based at that location at the time of the application.</li>
<li>int: total number of patent applications.</li>
<li>int: total number of citations made in all the patent applications.</li>
<li>int: total number of inventors listed in the patent applications.</li>
<li>dataframe: information on assignees. For each unique assignee:<ul>
<li>name of the assignee, if an organization</li>
<li>type of the assignee (see <strong>PatentsView Database</strong> section, above)</li>
<li>counter containing the number of inventors based in each location</li>
<li>number of patent applications</li>
<li>number of citations made in patent applications</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Missing-Data-and-Inconsistencies">Missing Data and Inconsistencies<a class="anchor-link" href="#Missing-Data-and-Inconsistencies">&#182;</a></h3><p>The <strong>preprocess_data</strong> function takes care of the missing data and inconsistencies that were found during the data exploration phase. These particularities are summarized as follows.</p>
<ul>
<li>We discard the data belonging to assignees which have no <code>assignee_id</code> attributed. </li>
<li>We discard the data with NaN as <code>assignee_type</code>. </li>
<li>We do not count the cited patents which have no corresponding patent_number, which are a negligeable amount.</li>
<li>We discard data which have either None or '0.1' in either <code>inventor_latitude</code> or <code>inventor_longitude</code>, as this data is useless for the visualizations.</li>
</ul>
<p>We show below that the amount is negligeable, as compared to the total amount of data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Required imports for loading the data for Part 1.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pipeline</span> <span class="k">import</span> <span class="n">load_data</span><span class="p">,</span> <span class="n">get_ts</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Define local data folder and data year range.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">MY_PATH</span> <span class="o">=</span> <span class="s1">&#39;/media/dcm/HDD/ADA_DATA&#39;</span>
<span class="n">MIN_YEAR</span> <span class="o">=</span> <span class="mi">1990</span>
<span class="n">MAX_YEAR</span> <span class="o">=</span> <span class="mi">2016</span>
<span class="n">year_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">MIN_YEAR</span><span class="p">,</span><span class="n">MAX_YEAR</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here we load the full dataset. As the data is already all on disk, the data preprocessing takes less than an hour to complete. <strong>Running this next line for the full time range (1990-2016), if no data is yet saved to disk, will take a few hours.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_year_data</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="n">year_range</span><span class="p">,</span> <span class="n">MY_PATH</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/media/dcm/HDD/ADA_DATA 1990q1
already on file
/media/dcm/HDD/ADA_DATA 1990q2
already on file
/media/dcm/HDD/ADA_DATA 1990q3
already on file
/media/dcm/HDD/ADA_DATA 1990q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1990q1.json
/media/dcm/HDD/ADA_DATA/1990q2.json
/media/dcm/HDD/ADA_DATA/1990q3.json
/media/dcm/HDD/ADA_DATA/1990q4.json
/media/dcm/HDD/ADA_DATA 1991q1
already on file
/media/dcm/HDD/ADA_DATA 1991q2
already on file
/media/dcm/HDD/ADA_DATA 1991q3
already on file
/media/dcm/HDD/ADA_DATA 1991q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1991q1.json
/media/dcm/HDD/ADA_DATA/1991q2.json
/media/dcm/HDD/ADA_DATA/1991q3.json
/media/dcm/HDD/ADA_DATA/1991q4.json
/media/dcm/HDD/ADA_DATA 1992q1
already on file
/media/dcm/HDD/ADA_DATA 1992q2
already on file
/media/dcm/HDD/ADA_DATA 1992q3
already on file
/media/dcm/HDD/ADA_DATA 1992q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1992q1.json
/media/dcm/HDD/ADA_DATA/1992q2.json
/media/dcm/HDD/ADA_DATA/1992q3.json
/media/dcm/HDD/ADA_DATA/1992q4.json
/media/dcm/HDD/ADA_DATA 1993q1
already on file
/media/dcm/HDD/ADA_DATA 1993q2
already on file
/media/dcm/HDD/ADA_DATA 1993q3
already on file
/media/dcm/HDD/ADA_DATA 1993q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1993q1.json
/media/dcm/HDD/ADA_DATA/1993q2.json
/media/dcm/HDD/ADA_DATA/1993q3.json
/media/dcm/HDD/ADA_DATA/1993q4.json
/media/dcm/HDD/ADA_DATA 1994q1
already on file
/media/dcm/HDD/ADA_DATA 1994q2
already on file
/media/dcm/HDD/ADA_DATA 1994q3
already on file
/media/dcm/HDD/ADA_DATA 1994q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1994q1.json
/media/dcm/HDD/ADA_DATA/1994q2.json
/media/dcm/HDD/ADA_DATA/1994q3.json
/media/dcm/HDD/ADA_DATA/1994q4.json
/media/dcm/HDD/ADA_DATA 1995q1
already on file
/media/dcm/HDD/ADA_DATA 1995q2
already on file
/media/dcm/HDD/ADA_DATA 1995q3
already on file
/media/dcm/HDD/ADA_DATA 1995q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1995q1.json
/media/dcm/HDD/ADA_DATA/1995q2.json
/media/dcm/HDD/ADA_DATA/1995q3.json
/media/dcm/HDD/ADA_DATA/1995q4.json
/media/dcm/HDD/ADA_DATA 1996q1
already on file
/media/dcm/HDD/ADA_DATA 1996q2
already on file
/media/dcm/HDD/ADA_DATA 1996q3
already on file
/media/dcm/HDD/ADA_DATA 1996q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1996q1.json
/media/dcm/HDD/ADA_DATA/1996q2.json
/media/dcm/HDD/ADA_DATA/1996q3.json
/media/dcm/HDD/ADA_DATA/1996q4.json
/media/dcm/HDD/ADA_DATA 1997q1
already on file
/media/dcm/HDD/ADA_DATA 1997q2
already on file
/media/dcm/HDD/ADA_DATA 1997q3
already on file
/media/dcm/HDD/ADA_DATA 1997q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1997q1.json
/media/dcm/HDD/ADA_DATA/1997q2.json
/media/dcm/HDD/ADA_DATA/1997q3.json
/media/dcm/HDD/ADA_DATA/1997q4.json
/media/dcm/HDD/ADA_DATA 1998q1
already on file
/media/dcm/HDD/ADA_DATA 1998q2
already on file
/media/dcm/HDD/ADA_DATA 1998q3
already on file
/media/dcm/HDD/ADA_DATA 1998q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1998q1.json
/media/dcm/HDD/ADA_DATA/1998q2.json
/media/dcm/HDD/ADA_DATA/1998q3.json
/media/dcm/HDD/ADA_DATA/1998q4.json
/media/dcm/HDD/ADA_DATA 1999q1
already on file
/media/dcm/HDD/ADA_DATA 1999q2
already on file
/media/dcm/HDD/ADA_DATA 1999q3
already on file
/media/dcm/HDD/ADA_DATA 1999q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/1999q1.json
/media/dcm/HDD/ADA_DATA/1999q2.json
/media/dcm/HDD/ADA_DATA/1999q3.json
/media/dcm/HDD/ADA_DATA/1999q4.json
/media/dcm/HDD/ADA_DATA 2000q1
already on file
/media/dcm/HDD/ADA_DATA 2000q2
already on file
/media/dcm/HDD/ADA_DATA 2000q3
already on file
/media/dcm/HDD/ADA_DATA 2000q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2000q1.json
/media/dcm/HDD/ADA_DATA/2000q2.json
/media/dcm/HDD/ADA_DATA/2000q3.json
/media/dcm/HDD/ADA_DATA/2000q4.json
/media/dcm/HDD/ADA_DATA 2001q1
already on file
/media/dcm/HDD/ADA_DATA 2001q2
already on file
/media/dcm/HDD/ADA_DATA 2001q3
already on file
/media/dcm/HDD/ADA_DATA 2001q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2001q1.json
/media/dcm/HDD/ADA_DATA/2001q2.json
/media/dcm/HDD/ADA_DATA/2001q3.json
/media/dcm/HDD/ADA_DATA/2001q4.json
/media/dcm/HDD/ADA_DATA 2002q1
already on file
/media/dcm/HDD/ADA_DATA 2002q2
already on file
/media/dcm/HDD/ADA_DATA 2002q3
already on file
/media/dcm/HDD/ADA_DATA 2002q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2002q1.json
/media/dcm/HDD/ADA_DATA/2002q2.json
/media/dcm/HDD/ADA_DATA/2002q3.json
/media/dcm/HDD/ADA_DATA/2002q4.json
/media/dcm/HDD/ADA_DATA 2003q1
already on file
/media/dcm/HDD/ADA_DATA 2003q2
already on file
/media/dcm/HDD/ADA_DATA 2003q3
already on file
/media/dcm/HDD/ADA_DATA 2003q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2003q1.json
/media/dcm/HDD/ADA_DATA/2003q2.json
/media/dcm/HDD/ADA_DATA/2003q3.json
/media/dcm/HDD/ADA_DATA/2003q4.json
/media/dcm/HDD/ADA_DATA 2004q1
already on file
/media/dcm/HDD/ADA_DATA 2004q2
already on file
/media/dcm/HDD/ADA_DATA 2004q3
already on file
/media/dcm/HDD/ADA_DATA 2004q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2004q1.json
/media/dcm/HDD/ADA_DATA/2004q2.json
/media/dcm/HDD/ADA_DATA/2004q3.json
/media/dcm/HDD/ADA_DATA/2004q4.json
/media/dcm/HDD/ADA_DATA 2005q1
already on file
/media/dcm/HDD/ADA_DATA 2005q2
already on file
/media/dcm/HDD/ADA_DATA 2005q3
already on file
/media/dcm/HDD/ADA_DATA 2005q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2005q1.json
/media/dcm/HDD/ADA_DATA/2005q2.json
/media/dcm/HDD/ADA_DATA/2005q3.json
/media/dcm/HDD/ADA_DATA/2005q4.json
/media/dcm/HDD/ADA_DATA 2006q1
already on file
/media/dcm/HDD/ADA_DATA 2006q2
already on file
/media/dcm/HDD/ADA_DATA 2006q3
already on file
/media/dcm/HDD/ADA_DATA 2006q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2006q1.json
/media/dcm/HDD/ADA_DATA/2006q2.json
/media/dcm/HDD/ADA_DATA/2006q3.json
/media/dcm/HDD/ADA_DATA/2006q4.json
/media/dcm/HDD/ADA_DATA 2007q1
already on file
/media/dcm/HDD/ADA_DATA 2007q2
already on file
/media/dcm/HDD/ADA_DATA 2007q3
already on file
/media/dcm/HDD/ADA_DATA 2007q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2007q1.json
/media/dcm/HDD/ADA_DATA/2007q2.json
/media/dcm/HDD/ADA_DATA/2007q3.json
/media/dcm/HDD/ADA_DATA/2007q4.json
/media/dcm/HDD/ADA_DATA 2008q1
already on file
/media/dcm/HDD/ADA_DATA 2008q2
already on file
/media/dcm/HDD/ADA_DATA 2008q3
already on file
/media/dcm/HDD/ADA_DATA 2008q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2008q1.json
/media/dcm/HDD/ADA_DATA/2008q2.json
/media/dcm/HDD/ADA_DATA/2008q3.json
/media/dcm/HDD/ADA_DATA/2008q4.json
/media/dcm/HDD/ADA_DATA 2009q1
already on file
/media/dcm/HDD/ADA_DATA 2009q2
already on file
/media/dcm/HDD/ADA_DATA 2009q3
already on file
/media/dcm/HDD/ADA_DATA 2009q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2009q1.json
/media/dcm/HDD/ADA_DATA/2009q2.json
/media/dcm/HDD/ADA_DATA/2009q3.json
/media/dcm/HDD/ADA_DATA/2009q4.json
/media/dcm/HDD/ADA_DATA 2010q1
already on file
/media/dcm/HDD/ADA_DATA 2010q2
already on file
/media/dcm/HDD/ADA_DATA 2010q3
already on file
/media/dcm/HDD/ADA_DATA 2010q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2010q1.json
/media/dcm/HDD/ADA_DATA/2010q2.json
/media/dcm/HDD/ADA_DATA/2010q3.json
/media/dcm/HDD/ADA_DATA/2010q4.json
/media/dcm/HDD/ADA_DATA 2011q1
already on file
/media/dcm/HDD/ADA_DATA 2011q2
already on file
/media/dcm/HDD/ADA_DATA 2011q3
already on file
/media/dcm/HDD/ADA_DATA 2011q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2011q1.json
/media/dcm/HDD/ADA_DATA/2011q2.json
/media/dcm/HDD/ADA_DATA/2011q3.json
/media/dcm/HDD/ADA_DATA/2011q4.json
/media/dcm/HDD/ADA_DATA 2012q1
already on file
/media/dcm/HDD/ADA_DATA 2012q2
already on file
/media/dcm/HDD/ADA_DATA 2012q3
already on file
/media/dcm/HDD/ADA_DATA 2012q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2012q1.json
/media/dcm/HDD/ADA_DATA/2012q2.json
/media/dcm/HDD/ADA_DATA/2012q3.json
/media/dcm/HDD/ADA_DATA/2012q4.json
/media/dcm/HDD/ADA_DATA 2013q1
already on file
/media/dcm/HDD/ADA_DATA 2013q2
already on file
/media/dcm/HDD/ADA_DATA 2013q3
already on file
/media/dcm/HDD/ADA_DATA 2013q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2013q1.json
/media/dcm/HDD/ADA_DATA/2013q2.json
/media/dcm/HDD/ADA_DATA/2013q3.json
/media/dcm/HDD/ADA_DATA/2013q4.json
/media/dcm/HDD/ADA_DATA 2014q1
already on file
/media/dcm/HDD/ADA_DATA 2014q2
already on file
/media/dcm/HDD/ADA_DATA 2014q3
already on file
/media/dcm/HDD/ADA_DATA 2014q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2014q1.json
/media/dcm/HDD/ADA_DATA/2014q2.json
/media/dcm/HDD/ADA_DATA/2014q3.json
/media/dcm/HDD/ADA_DATA/2014q4.json
/media/dcm/HDD/ADA_DATA 2015q1
already on file
/media/dcm/HDD/ADA_DATA 2015q2
already on file
/media/dcm/HDD/ADA_DATA 2015q3
already on file
/media/dcm/HDD/ADA_DATA 2015q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2015q1.json
/media/dcm/HDD/ADA_DATA/2015q2.json
/media/dcm/HDD/ADA_DATA/2015q3.json
/media/dcm/HDD/ADA_DATA/2015q4.json
/media/dcm/HDD/ADA_DATA 2016q1
already on file
/media/dcm/HDD/ADA_DATA 2016q2
already on file
/media/dcm/HDD/ADA_DATA 2016q3
already on file
/media/dcm/HDD/ADA_DATA 2016q4
already on file
loading data from disk
/media/dcm/HDD/ADA_DATA/2016q1.json
/media/dcm/HDD/ADA_DATA/2016q2.json
/media/dcm/HDD/ADA_DATA/2016q3.json
/media/dcm/HDD/ADA_DATA/2016q4.json
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_year_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;1990&#39;, &#39;1991&#39;, &#39;1992&#39;, &#39;1993&#39;, &#39;1994&#39;, &#39;1995&#39;, &#39;1996&#39;, &#39;1997&#39;, &#39;1998&#39;, &#39;1999&#39;, &#39;2000&#39;, &#39;2001&#39;, &#39;2002&#39;, &#39;2003&#39;, &#39;2004&#39;, &#39;2005&#39;, &#39;2006&#39;, &#39;2007&#39;, &#39;2008&#39;, &#39;2009&#39;, &#39;2010&#39;, &#39;2011&#39;, &#39;2012&#39;, &#39;2013&#39;, &#39;2014&#39;, &#39;2015&#39;, &#39;2016&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_year_data</span><span class="p">[</span><span class="s1">&#39;1990&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;num_by_patent_type&#39;, &#39;locations&#39;, &#39;num_patents&#39;, &#39;num_citations&#39;, &#39;num_inventors&#39;, &#39;assignees&#39;, &#39;discarded&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_year_data</span><span class="p">[</span><span class="s1">&#39;1990&#39;</span><span class="p">][</span><span class="s1">&#39;locations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>(35.6895, 139.692)</th>
      <td>8211</td>
    </tr>
    <tr>
      <th>(35.4437, 139.638)</th>
      <td>4507</td>
    </tr>
    <tr>
      <th>(37.5833, 139.917)</th>
      <td>3699</td>
    </tr>
    <tr>
      <th>(34.6971, 135.498)</th>
      <td>2682</td>
    </tr>
    <tr>
      <th>(35.5298, 139.702)</th>
      <td>1879</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_year_data</span><span class="p">[</span><span class="s1">&#39;1990&#39;</span><span class="p">][</span><span class="s1">&#39;assignees&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;patents&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>organization</th>
      <th>type</th>
      <th>inventors_loc</th>
      <th>patents</th>
      <th>citations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>338389</th>
      <td>Kabushiki Kaisha Toshiba</td>
      <td>3</td>
      <td>{(35.1814, 136.906): 4, (35.6895, 139.692): 21...</td>
      <td>1121</td>
      <td>1097</td>
    </tr>
    <tr>
      <th>164304</th>
      <td>Canon Kabushiki Kaisha</td>
      <td>3</td>
      <td>{(35.5298, 139.702): 141, (35.4437, 139.638): ...</td>
      <td>1055</td>
      <td>1047</td>
    </tr>
    <tr>
      <th>299786</th>
      <td>Hitachi, Ltd.</td>
      <td>3</td>
      <td>{(35.7225, 140.1): 3, (43.9333, 143.717): 6, (...</td>
      <td>1038</td>
      <td>1010</td>
    </tr>
    <tr>
      <th>222962</th>
      <td>Eastman Kodak Company</td>
      <td>2</td>
      <td>{(43.0987, -77.4419): 38, (42.9981, -78.1875):...</td>
      <td>919</td>
      <td>907</td>
    </tr>
    <tr>
      <th>63181</th>
      <td>International Business Machines Corporation</td>
      <td>2</td>
      <td>{(34.8667, 134.633): 2, (41.584, -73.8087): 8,...</td>
      <td>899</td>
      <td>887</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Verifying data.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">discarded_patents</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">discarded_citations</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">discarded_assignees</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">discarded_inventors</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">discarded</span> <span class="o">=</span> <span class="n">full_year_data</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)][</span><span class="s1">&#39;discarded&#39;</span><span class="p">]</span>
    <span class="n">discarded_patents</span> <span class="o">+=</span> <span class="n">discarded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">discarded_citations</span> <span class="o">+=</span> <span class="n">discarded</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">discarded_assignees</span> <span class="o">+=</span> <span class="n">discarded</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">discarded_inventors</span> <span class="o">+=</span> <span class="n">discarded</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">discarded_patents</span><span class="p">,</span> <span class="n">discarded_citations</span><span class="p">,</span> <span class="n">discarded_assignees</span><span class="p">,</span> <span class="n">discarded_inventors</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(12842, 298046, 122, 83454)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Looking at the time series graphs in the data story, we conclude that these numbers are negligeable compared to the total amount of data. To be sure, we need to take into account that the above numbers are for all the years, so if one same assignee is discarded each year, it would be counted 27 times. In the data we do use, we have around 150k patents each year, 1.25M citations each year, 20k assignees and 300k inventors. All these numbers multiplied by 27 years make the above numbers negligeable.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Part-2.">Part 2.<a class="anchor-link" href="#Part-2.">&#182;</a></h2><p>The following functions in the <strong>pipeline</strong> module are specifically for preprocessing the data required for Part 2:</p>
<ul>
<li><strong>load_layers_data</strong>: Loads data from disk and converts the required data from json to dataframe.<ul>
<li><strong>get_layers_data</strong>: Fetches all data, one layer at a time.<ul>
<li><strong>get_cited_patents_data</strong>: Fetches the data for the given list of patent_numbers from the PatentsView API.</li>
<li><strong>preprocess_layer_data</strong>: Preprocesses saved json data from file to the format used for the data analysis.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The preprocessed data (output of <strong>load_layers_data</strong>) has the following structure:</p>
<ul>
<li>for each LAYER:<ul>
<li>a list of the patents cited by the patents in that layer</li>
<li>a unique list of inventors and their locations for the patents in that layer </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pipeline</span> <span class="k">import</span> <span class="n">load_layers_data</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">apple_example_data</span> <span class="o">=</span> <span class="n">load_layers_data</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">patent_number</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;9430098&#39;</span><span class="p">],</span> <span class="n">layers</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">data_dir</span> <span class="o">=</span> <span class="n">MY_PATH</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">apple_example_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">apple_example_data</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">apple_example_data</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">][</span><span class="s1">&#39;cited_patents&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">apple_example_data</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">][</span><span class="s1">&#39;inventors&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Visualizations">Visualizations<a class="anchor-link" href="#Visualizations">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Part-1.">Part 1.<a class="anchor-link" href="#Part-1.">&#182;</a></h2><p>The following functions in the <strong>visualizations</strong> module are specifically for Part 1:</p>
<ul>
<li><p><strong>get_html</strong>: Produces HTML rendering of Folium map of the distribution of the inventors for the given type (All Assignees, All or top K US Assignees, or All or top K Non-US Assignees) for the given year, and saves it to working directory.</p>
<ul>
<li>If viz is 'All' and K is None, produces a map showing the locations of all inventors</li>
<li>If viz is 'All' and K is k, produces a map showing the locations of inventors for the top k assignees, as well as csv file containing the list of of those assignees and their number of patents, and returns the total number of inventors for those assignees</li>
<li>If viz is 'US Assignees' or 'Non-US Assignees', K is not optional</li>
</ul>
</li>
<li><p><strong>get_timeseries_fig</strong>: Produces a figure with the following time series plots and saves to working directory:</p>
<ul>
<li>Number of utility patents vs design patents vs other patents</li>
<li>Total number of inventors</li>
<li>Number of inventors for the top K Non-US/US Assignees</li>
<li>Total number of Citations</li>
<li>Total number of individuals as assignees</li>
</ul>
</li>
<li><p><strong>get_assignees_plot</strong>: Produces a figure comparing the time series plots of the number of inventors for two lists of assignees, and saves to working directory.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">visualizations</span> <span class="k">import</span> <span class="n">get_html</span><span class="p">,</span> <span class="n">get_timeseries_fig</span><span class="p">,</span> <span class="n">get_assignees_plot</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following lines produce the HTML figures for the maps in Part 1. In the data story, only the first map is a Leaflet, and the rest are timelapse GIFs which were manually created from these HTML files. To create these timelapses, we first converted the HTML files to PNG using <strong><a href="https://image.online-convert.com/convert-to-png">image-online-convert</a></strong> (which was the only good-quality free service that did not impose any limits for this type of job). We then used the open-source image editor <strong><a href="https://www.gimp.org/">GIMP</a></strong> to create a timelapse of these images with the year shown.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># World View</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;All&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Zoom on Asia</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;All&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">,</span> <span class="n">zoom_on</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mf">3.5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Zoom on Europe</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;All&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">,</span> <span class="n">zoom_on</span> <span class="o">=</span> <span class="p">(</span><span class="mi">53</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mf">3.5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Zoom on US</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;All&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">,</span> <span class="n">zoom_on</span> <span class="o">=</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span><span class="mf">3.5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># World View, Top 10 Assignees US and Non-US</span>
<span class="n">num_inventors_top10_us</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">num_inventors_top10_nonus</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">year_range</span><span class="p">:</span>
    <span class="n">num_inventors_top10_us</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;US Assignees&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">num_inventors_top10_nonus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_html</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span><span class="s1">&#39;Non-US Assignees&#39;</span><span class="p">,</span><span class="n">year</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># time series figure</span>
<span class="n">get_timeseries_fig</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span> <span class="n">year_range</span><span class="p">,</span> <span class="n">num_inventors_top10_us</span><span class="p">,</span> <span class="n">num_inventors_top10_nonus</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To create the table containing the names of the top 10 assignees in for each year, we manually copy-pasted the lists for each year which is produced by <strong>get_html()</strong>, when passing an argument for K, into a single CSV file and we then converted that file to HTML using Pandas.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># top assignees tables</span>
<span class="n">text_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;top_us_table.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">text_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">MY_PATH</span> <span class="o">+</span> <span class="s1">&#39;/Results/Top10_US.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> 
                                                                                    <span class="n">col_space</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> 
                                                                                    <span class="n">justify</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">))</span>
<span class="n">text_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">text_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;top_nonus_table.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">text_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">MY_PATH</span> <span class="o">+</span> <span class="s1">&#39;/Results/Top10_NonUS.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> 
                                                                                    <span class="n">col_space</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> 
                                                                                    <span class="n">justify</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">))</span>
<span class="n">text_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For the last plot of Part 1, we arbitralily chose a handful of the top assignees to plot the evolution of their number of inventors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># evolution in number of inventors for top assignees plot</span>
<span class="n">assignees_us</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Intel Corporation&#39;</span><span class="p">,</span> <span class="s1">&#39;Amazon Technologies, Inc.&#39;</span><span class="p">,</span><span class="s1">&#39;International Business Machines Corporation&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Google Inc.&#39;</span><span class="p">,</span> <span class="s1">&#39;General Electric Company&#39;</span><span class="p">,</span> <span class="s1">&#39;QUALCOMM Incorporated&#39;</span><span class="p">]</span>
<span class="n">assignees_nonus</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Samsung Electronics Co., Ltd.&#39;</span><span class="p">,</span> <span class="s1">&#39;Canon Kabushiki Kaisha&#39;</span><span class="p">,</span> <span class="s1">&#39;Sony Côrporation&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;Taiwan Semiconductor Manufacturing Company, Ltd.&#39;</span><span class="p">,</span><span class="s1">&#39;Hon Hai Precision Industry Co., Ltd.&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;LG Electronics Inc.&#39;</span><span class="p">,</span><span class="s1">&#39;Huawei Technologies Co., Ltd.&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_assignees_plot</span><span class="p">(</span><span class="n">full_year_data</span><span class="p">,</span> <span class="n">assignees_us</span><span class="p">,</span> <span class="n">assignees_nonus</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Part-2.">Part 2.<a class="anchor-link" href="#Part-2.">&#182;</a></h2><p>The following functions in the <strong>visualizations</strong> module are specifically for Part 2:</p>
<ul>
<li><strong>save_layers</strong>: Produce HTML rendering of Folium map with or without layer control.<ul>
<li>If layered is True, then it produces a single HTML file with each Leaflet layer representing the locations of the inventors in each layer of innovators</li>
<li>If layered is False, then it produces one HTML file for each layer</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">visualizations</span> <span class="k">import</span> <span class="n">save_layers</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">save_layers</span><span class="p">(</span><span class="n">apple_example_data</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="n">zoom_on</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">layered</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">
            <p>cmdavid-epfl, torbognaes, mcdv</p>
            <p>Data by PatentsView.org</p>
            </li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>The Dynamics of Innovation</p>
        <p>EPFL CS-401 Applied Data Analysis Project. Fall 2018.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
